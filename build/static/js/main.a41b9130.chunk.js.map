{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","Error","PersonForm","props","onSubmit","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","newFilter","handleFilterChange","Numbers","persons","filter","deletePerson","map","p","key","name","number","remove","x","toLowerCase","includes","m","Person","onClick","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","setMessage","errorMessage","setErrorMessage","useEffect","personService","showMessage","time","setTimeout","updateNumber","updatedObject","filtered","concat","sort","a","b","catch","error","event","target","preventDefault","find","person","updatedPerson","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a41b9130.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\nconst destroy = (id) =>Â {\n   \n    return axios.delete(`${baseUrl}/${id}`)\n   \n}\n\n\nexport default {getAll, create, update, destroy}","import React, { useState , useEffect } from 'react'\nimport axios from 'axios'\nimport personService from './services/persons'\nimport './index.css'\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(()=>{    \n      personService.getAll().then(response=>{\n      setPersons(response)\n    \n    })\n  },[])\n\n  const addPerson = (event) => {\n\n    event.preventDefault()\n  \n    if(persons.find(person => person.name.toLowerCase() === newName.toLowerCase())){\n        const p = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n        if(p.number === \"\"){\n          const updatedPerson = {\n            name: p.name,\n            number: newNumber\n           }\n          \n          showMessage(`Number added for ${p.name}`)\n          updateNumber(p.id, updatedPerson)\n          setNewNumber('')\n          setNewName('')\n        }\n\n        else if(window.confirm(`${p.name} is already added to phonebook, replace the old number with new one? `)){\n          \n          const updatedPerson = {\n            name: p.name,\n            number: newNumber\n           }\n           \n          updateNumber(p.id, updatedPerson)\n          setNewNumber('')\n          setNewName('')\n        }\n    }else{\n\n    const newNameObject = {\n        name: newName,\n        number: newNumber\n    }\n    \n    personService.create(newNameObject).then(response => {\n      setPersons(persons.concat(response),\n      setNewName(''),\n      setNewNumber(''),\n      showMessage(`Added ${response.name}`)\n      )}).catch(error => {\n        setErrorMessage(error.response.data.error)\n      setTimeout(()=> setErrorMessage(null), 7000)\n      })\n    }\n  }\n  \n  const showMessage = (message, time) => {\n    setMessage(message)\n           setTimeout(() => {\n             setMessage(null)\n           }, 5000)\n  }\n  const deletePerson = person => {\n     \n      if(window.confirm(`Delete ${person.name} ?`)){\n      personService.destroy(person.id).then(response => {\n      const p = persons.filter(x => x.id !== person.id)\n      setPersons(p)\n      showMessage(`${person.name} has now been deleted from phonebook`)\n      }\n    )\n  }\n}\n\nconst updateNumber = (id, updatedObject) => {\n    personService.update(id, updatedObject).then(response => {\n      \n     const filtered = persons.filter((x)=> x.id !== id)\n     \n     setPersons(filtered.concat(updatedObject).sort((a,b)=>(a.id>b.id)? 1 : (a.id<b.id)? -1 : 0))\n     \n     showMessage(`Number updated for ${updatedObject.name}`)\n    }).catch(error => {\n      setErrorMessage(`Information ${updatedObject.name} has already been deleted from server`)\n      setTimeout(()=> setErrorMessage(null), 5000)\n  })\n}\n\n\n  const handleNumberChange = (event) => {\n     setNewNumber(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n}\n\n  return (\n    <div>\n      <Error message = {errorMessage}/>\n      <Notification message = {message}/>\n      <h2>Phonebook</h2>\n      <Filter newFilter = {newFilter} handleFilterChange={handleFilterChange}/>\n      <PersonForm onSubmit = {addPerson} newName={newName} newNumber = {newNumber} \n      handleNameChange = {handleNameChange} \n      handleNumberChange = {handleNumberChange}/>\n     \n      <h2>Numbers</h2>\n      <Numbers persons = {persons} filter = {newFilter} deletePerson = {deletePerson}/>\n      \n    </div>\n  )\n  }\n\nconst Notification = ({message}) => {\n\n  if(message===null){\n    return null\n  }\n  return(\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n\n}\nconst Error = ({message}) => {\n\n  if(message===null){\n    return null\n  }\n  return(\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n\n}\n\nconst PersonForm = (props) => {\n    return(\n        <form onSubmit = {props.onSubmit}>\n        <div>\n          name: <input value={props.newName} onChange={props.handleNameChange} /> <br />\n          number: <input value = {props.newNumber} onChange={props.handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n  }\n\nconst Filter = (props) => {\n    \n \n    return(\n        <div>\n            <strong>Filter by name</strong>\n\n            <input value = {props.newFilter} onChange = {props.handleFilterChange} />\n           \n            <br />\n            <br />\n        </div>\n    )\n}\n\nconst Numbers = ({persons, filter, deletePerson}) => {\n    \n    if(filter===\"\"){\n    return(\n        <div>\n            \n            {persons.map((p)=><Person key = {p.name} name = {p.name} number = {p.number} remove = {()=> deletePerson(p)}/>)}\n        </div>\n    )\n    }else{\n        return(\n            <div>\n               {persons.filter((x)=>x.name.toLowerCase()\n               .includes(filter.toLowerCase())).map((m) => \n               <Person key = {m.name} name = {m.name} number = {m.number} remove = {()=> deletePerson(m)}/>)}\n            </div>\n        )\n    }\n} \nconst Person = ({name, number, remove}) => {\n   \n    return(\n        <div>\n          <ul className = 'note'>\n            <li>{name} {number} <button onClick = {remove}>delete</button></li>\n            </ul>\n        </div>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}